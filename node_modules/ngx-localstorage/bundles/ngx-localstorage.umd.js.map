{"version":3,"file":"ngx-localstorage.umd.js.map","sources":["ng://ngx-localstorage/lib/services/promisable.service.ts","ng://ngx-localstorage/lib/utils.ts","ng://ngx-localstorage/lib/token.ts","ng://ngx-localstorage/lib/services/ngx-localstorage.service.ts","ng://ngx-localstorage/lib/services/storage-event.service.ts","ng://ngx-localstorage/lib/directives/ngx-localstorage.directive.ts","ng://ngx-localstorage/lib/decorators.ts","ng://ngx-localstorage/lib/ngx-localstorage.module.ts"],"sourcesContent":["/**\r\n * Created by bohoffi on 22.05.2017.\r\n*/\r\nimport {ModuleConfig} from '../interfaces';\r\n\r\nexport class PromisableService {\r\n\r\n  private readonly _prefix: string;\r\n  private readonly _allowNull: boolean;\r\n\r\n  constructor(config?: ModuleConfig) {\r\n    if (config) {\r\n      this._prefix = config.prefix || this._prefix;\r\n      this._allowNull = config.allowNull || this._allowNull;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets the number of entries in the applications local storage.\r\n   */\r\n  count(): Promise<number> {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        resolve(localStorage.length);\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Returns the nth (defined by the index parameter) key in the storage.\r\n   * The order of keys is user-agent defined, so you should not rely on it.\r\n   * @param index   An integer representing the number of the key you want to get the name of. This is a zero-based index.\r\n   */\r\n  getKey(index: number): Promise<string | null> {\r\n    return new Promise<string | null>((resolve, reject) => {\r\n      if (index < 0) {\r\n        reject(new Error('index has to be 0 or greater'));\r\n      }\r\n      try {\r\n        resolve(localStorage.key(index));\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Adds tha value with the given key or updates an existing entry.\r\n   * @param key     Key to store.\r\n   * @param value   Value to store.\r\n   * @param prefix  Optional prefix to overwrite the configured one.\r\n   */\r\n  set(key: string, value: string, prefix?: string): Promise<boolean> {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        if (this._allowNull\r\n          || (!this._allowNull && value !== 'null' && value !== null && value !== undefined)) {\r\n          localStorage.setItem(`${prefix || this._prefix}_${key}`, value);\r\n        } else {\r\n          return this.remove(key, prefix);\r\n        }\r\n        resolve(true);\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Gets the entry specified by the given key or null.\r\n   * @param key     Key identifying the wanted entry.\r\n   * @param prefix  Optional prefix to overwrite the configured one.\r\n   */\r\n  get(key: string, prefix?: string): Promise<string | null> {\r\n    return new Promise<string | null>((resolve, reject) => {\r\n      try {\r\n        resolve(localStorage.getItem(`${prefix || this._prefix}_${key}`));\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Removes the entry specified by the given key.\r\n   * @param key     Key identifying the entry to remove.\r\n   * @param prefix  Optional prefix to overwrite the configured one.\r\n   */\r\n  remove(key: string, prefix?: string): Promise<boolean> {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        localStorage.removeItem(`${prefix || this._prefix}_${key}`);\r\n        resolve(true);\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Clears all entries of the applications local storage.\r\n   */\r\n  clear(): Promise<boolean> {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        localStorage.clear();\r\n        resolve(true);\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n}\r\n","/**\r\n * Created by bohoffi on 04.04.2017.\r\n */\r\nimport {ModuleConfig} from './interfaces';\r\n\r\nexport const getProperty = (path: string[], object: any) =>\r\n  path.reduce((obj: any, p: any) => (!!obj) ? obj[p] : null, object);\r\n\r\nexport const setProperty = (path: string[] | string, value: any, object: any, falsyTransformer?: () => any) => {\r\n  const lastKeyIndex = path.length - 1;\r\n  for (let i = 0; i < lastKeyIndex; ++i) {\r\n    const key = path[i];\r\n    if (!(key in object)) {\r\n      object[key] = {};\r\n    }\r\n    object = object[key];\r\n  }\r\n  object[path[lastKeyIndex]] = (!value || (typeof value === 'string' && value === 'false'))\r\n  && !!falsyTransformer ? falsyTransformer() : value;\r\n};\r\n\r\nexport const defaultConfig: ModuleConfig = {\r\n  allowNull: true,\r\n  prefix: 'ngx_local_storage'\r\n};\r\n","import {ModuleConfig} from './interfaces';\r\nimport {InjectionToken} from '@angular/core';\r\n\r\nexport const ModuleConfigToken = new InjectionToken<ModuleConfig>('moduleConfig');\r\n","import {Injectable, Optional, Inject} from '@angular/core';\r\n\r\nimport {ModuleConfig} from '../interfaces';\r\nimport {PromisableService} from './promisable.service';\r\nimport {defaultConfig} from '../utils';\r\nimport { ModuleConfigToken } from '../token';\r\n\r\n@Injectable({providedIn: 'root'})\r\nexport class LocalStorageService {\r\n  private readonly _prefix: string;\r\n  private readonly _allowNull: boolean;\r\n  private readonly _promisable: PromisableService;\r\n\r\n  constructor(@Inject(ModuleConfigToken) config?: ModuleConfig) {\r\n    if (config) {\r\n      this._prefix = config.prefix || defaultConfig.prefix;\r\n      this._allowNull = config.allowNull || defaultConfig.allowNull;\r\n    }\r\n    this._promisable = new PromisableService({\r\n      allowNull: this._allowNull,\r\n      prefix: this._prefix\r\n    });\r\n  }\r\n\r\n  asPromisable(): PromisableService {\r\n    return this._promisable;\r\n  }\r\n\r\n  /**\r\n   * Gets the number of entries in the applications local storage.\r\n   */\r\n  count(): number | undefined {\r\n    try {\r\n      return localStorage.length;\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the nth (defined by the index parameter) key in the storage.\r\n   * The order of keys is user-agent defined, so you should not rely on it.\r\n   * @param index   An integer representing the number of the key you want to get the name of. This is a zero-based index.\r\n   */\r\n  getKey(index: number): string | null | undefined {\r\n    if (index < 0) {\r\n      console.error(new Error('index has to be 0 or greater'));\r\n    }\r\n    try {\r\n      return localStorage.key(index);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds tha value with the given key or updates an existing entry.\r\n   * @param key     Key to store.\r\n   * @param value   Value to store.\r\n   * @param prefix  Optional prefix to overwrite the configured one.\r\n   */\r\n  set(key: string, value: string, prefix?: string): void {\r\n    if (\r\n      this._allowNull ||\r\n      (!this._allowNull &&\r\n        value !== 'null' &&\r\n        value !== null &&\r\n        value !== undefined)\r\n    ) {\r\n      localStorage.setItem(`${prefix || this._prefix}_${key}`, value);\r\n    } else {\r\n      this.remove(key, prefix);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets the entry specified by the given key or null.\r\n   * @param key     Key identifying the wanted entry.\r\n   * @param prefix  Optional prefix to overwrite the configured one.\r\n   */\r\n  get(key: string, prefix?: string): string | null | undefined {\r\n    try {\r\n      return localStorage.getItem(`${prefix || this._prefix}_${key}`);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes the entry specified by the given key.\r\n   * @param key     Key identifying the entry to remove.\r\n   * @param prefix  Optional prefix to overwrite the configured one.\r\n   */\r\n  remove(key: string, prefix?: string): void {\r\n    try {\r\n      localStorage.removeItem(`${prefix || this._prefix}_${key}`);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clears all entries of the applications local storage.\r\n   */\r\n  clear(): void {\r\n    try {\r\n      localStorage.clear();\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Created by bohoffi on 31.01.2018.\r\n */\r\nimport {Injectable} from '@angular/core';\r\nimport {fromEvent as observableFromEvent, BehaviorSubject, Observable} from 'rxjs';\r\nimport {share, filter} from 'rxjs/operators';\r\n\r\n@Injectable({providedIn: 'root'})\r\nexport class StorageEventService {\r\n\r\n  private _eventStream: BehaviorSubject<StorageEvent> = new BehaviorSubject<StorageEvent>(null);\r\n\r\n  constructor() {\r\n    observableFromEvent(window, 'storage')\r\n      .subscribe((ev: StorageEvent) => this._eventStream.next(ev));\r\n  }\r\n\r\n  get stream(): Observable<StorageEvent> {\r\n    return this._eventStream\r\n      .asObservable().pipe(\r\n        filter(ev => !!ev),\r\n        share()\r\n      );\r\n  }\r\n}\r\n","/**\r\n * Created by bohoffi on 03.04.2017.\r\n */\r\nimport {AfterViewInit, Directive, ElementRef, EventEmitter, Input, OnDestroy, Output} from '@angular/core';\r\nimport {fromEvent as observableFromEvent, Subscription} from 'rxjs';\r\nimport {debounceTime, filter} from 'rxjs/operators';\r\n\r\nimport {getProperty, setProperty} from '../utils';\r\nimport {LocalStorageService} from '../services/ngx-localstorage.service';\r\nimport {StorageEventService} from '../services/storage-event.service';\r\n\r\n@Directive({\r\n  selector: '[ngxLocalStorage]'\r\n})\r\nexport class LocalStorageDirective implements AfterViewInit, OnDestroy {\r\n\r\n  @Input('ngxLocalStorage')\r\n  lsKey: string;\r\n  @Input()\r\n  lsPrefix: string;\r\n  @Input()\r\n  lsEvent: string;\r\n  @Input()\r\n  lsDebounce = 0;\r\n  @Input()\r\n  lsInitFromStorage = false;\r\n  @Input()\r\n  lsFalsyTransformer?: () => any;\r\n\r\n  @Output()\r\n  lsStoredValue = new EventEmitter<any>();\r\n\r\n  private _eventSubscription: Subscription;\r\n  private _valuePath: string[] = [];\r\n\r\n  constructor(private er: ElementRef,\r\n              private lss: LocalStorageService,\r\n              private es: StorageEventService) {\r\n\r\n    this.es.stream.pipe(\r\n    // TODO: filter should be more accurate\r\n      filter((ev: StorageEvent) => ev.key.indexOf(this.lsKey) >= 0)\r\n    )\r\n      .subscribe((ev: StorageEvent) => {\r\n        setProperty(this._valuePath.length ? this._valuePath : ['value'], ev.newValue, this.er.nativeElement, this.lsFalsyTransformer);\r\n      });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this._initKey();\r\n    this._initFromStorage();\r\n    this._hookEvent();\r\n  }\r\n\r\n  @Input()\r\n  set lsValuePath(path: any[] | string) {\r\n    if (path != null) {\r\n      this._valuePath = Array.isArray(path) ? path : path.split(',');\r\n    } else {\r\n      this._valuePath = [];\r\n    }\r\n  }\r\n\r\n  private _initKey(): void {\r\n    if (!this.lsKey) {\r\n      if (!this.er.nativeElement.id && !this.er.nativeElement.name) {\r\n        throw new Error('No key or element id or name supplied!');\r\n      }\r\n      this.lsKey = this.er.nativeElement.id || this.er.nativeElement.name;\r\n    }\r\n  }\r\n\r\n  private _hookEvent(): void {\r\n    if (this.lsEvent) {\r\n      this._eventSubscription = observableFromEvent(this.er.nativeElement, this.lsEvent).pipe(\r\n        debounceTime(this.lsDebounce))\r\n        .subscribe(() => {\r\n          this.lss.asPromisable().set(this.lsKey,\r\n            getProperty(this._valuePath.length ? this._valuePath : ['value'], this.er.nativeElement),\r\n            this.lsPrefix)\r\n            .then(() => {\r\n              this.lss.asPromisable().get(this.lsKey, this.lsPrefix)\r\n                .then((value: any) => {\r\n                  this.lsStoredValue.emit(value);\r\n                })\r\n                .catch((err: Error) => console.error(err));\r\n            })\r\n            .catch((err: Error) => console.error(err));\r\n        });\r\n    }\r\n  }\r\n\r\n  private _initFromStorage(): void {\r\n    if (this.lsInitFromStorage) {\r\n      this.lss.asPromisable().get(this.lsKey, this.lsPrefix)\r\n        .then((storedValue: any) => {\r\n          setProperty(this._valuePath.length ? this._valuePath : ['value'], storedValue, this.er.nativeElement, this.lsFalsyTransformer);\r\n        })\r\n        .catch((err: Error) => console.error(err));\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this._eventSubscription && !this._eventSubscription.closed) {\r\n      this._eventSubscription.unsubscribe();\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Created by bohoffi on 22.05.2017.\r\n */\r\nimport {filter} from 'rxjs/operators';\r\n\r\nimport {DecoratorOpts} from './interfaces';\r\nimport {LocalStorageService} from './services/ngx-localstorage.service';\r\nimport {StorageEventService} from './services/storage-event.service';\r\n\r\nexport function ngxLocalStorage(options?: DecoratorOpts) {\r\n  return function (target: Object, propertyDescription: string) {\r\n\r\n    const service: LocalStorageService = new LocalStorageService({\r\n      prefix: !!options && !!options.prefix ? options.prefix : ''\r\n    });\r\n\r\n    const key = !!options && !!options.key ? options.key : propertyDescription;\r\n\r\n    const eventService: StorageEventService = new StorageEventService();\r\n    eventService.stream.pipe(\r\n      // TODO: filter should be more accurate\r\n      filter((ev: StorageEvent) => ev.key.indexOf(key) >= 0)\r\n    )\r\n      .subscribe((ev: StorageEvent) => {\r\n        if (!!ev.newValue && typeof ev.newValue === 'string') {\r\n          if (ev.newValue !== 'null') {\r\n            target[propertyDescription] = ev.newValue;\r\n          } else {\r\n            target[propertyDescription] = !!options.nullTransformer ? options.nullTransformer() : null;\r\n          }\r\n        }\r\n      });\r\n\r\n    Object.defineProperty(target, propertyDescription, {\r\n      get: function () {\r\n        const storageValue = service.get(key);\r\n        return storageValue == null && !!options.nullTransformer ? options.nullTransformer() : storageValue;\r\n      },\r\n      set: function (value: any) {\r\n        service.set(key, value);\r\n      }\r\n    });\r\n  };\r\n}\r\n","import {ModuleWithProviders, NgModule, Optional, SkipSelf} from '@angular/core';\r\n\r\nimport {ModuleConfig} from './interfaces';\r\nimport {LocalStorageService} from './services/ngx-localstorage.service';\r\nimport {StorageEventService} from './services/storage-event.service';\r\nimport {LocalStorageDirective} from './directives/ngx-localstorage.directive';\r\nimport {ModuleConfigToken} from './token';\r\n\r\nexport function provideStorageService(moduleConfig: ModuleConfig): LocalStorageService {\r\n  return new LocalStorageService(moduleConfig);\r\n}\r\n\r\n@NgModule({\r\n  imports: [\r\n  ],\r\n  declarations: [\r\n    LocalStorageDirective\r\n  ],\r\n  exports: [\r\n    LocalStorageDirective\r\n  ]\r\n})\r\nexport class NgxLocalStorageModule {\r\n  static forRoot(config?: ModuleConfig): ModuleWithProviders {\r\n    return {\r\n      ngModule: NgxLocalStorageModule,\r\n      providers: [\r\n        {\r\n          provide: ModuleConfigToken,\r\n          useValue: config\r\n        },\r\n        {\r\n          provide: LocalStorageService,\r\n          useFactory: provideStorageService,\r\n          deps: [\r\n            ModuleConfigToken\r\n          ]\r\n        },\r\n        StorageEventService\r\n      ]\r\n    };\r\n  }\r\n\r\n  constructor(@Optional() @SkipSelf() parentModule: NgxLocalStorageModule) {\r\n    if (parentModule) {\r\n      throw new Error('NgxLocalStorageModule is already loaded. Import it in the AppModule only');\r\n    }\r\n  }\r\n}\r\n"],"names":["InjectionToken","Injectable","Inject","BehaviorSubject","observableFromEvent","filter","share","EventEmitter","debounceTime","Directive","ElementRef","Input","Output","NgModule","Optional","SkipSelf"],"mappings":"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"}
