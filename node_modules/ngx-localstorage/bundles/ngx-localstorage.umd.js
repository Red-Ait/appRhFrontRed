(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs'), require('rxjs/operators')) :
    typeof define === 'function' && define.amd ? define('ngx-localstorage', ['exports', '@angular/core', 'rxjs', 'rxjs/operators'], factory) :
    (factory((global['ngx-localstorage'] = {}),global.ng.core,global.rxjs,global.rxjs.operators));
}(this, (function (exports,i0,rxjs,operators) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PromisableService = /** @class */ (function () {
        function PromisableService(config) {
            if (config) {
                this._prefix = config.prefix || this._prefix;
                this._allowNull = config.allowNull || this._allowNull;
            }
        }
        /**
         * Gets the number of entries in the applications local storage.
         */
        /**
         * Gets the number of entries in the applications local storage.
         * @return {?}
         */
        PromisableService.prototype.count = /**
         * Gets the number of entries in the applications local storage.
         * @return {?}
         */
            function () {
                return new Promise(function (resolve, reject) {
                    try {
                        resolve(localStorage.length);
                    }
                    catch (error) {
                        reject(error);
                    }
                });
            };
        /**
         * Returns the nth (defined by the index parameter) key in the storage.
         * The order of keys is user-agent defined, so you should not rely on it.
         * @param index   An integer representing the number of the key you want to get the name of. This is a zero-based index.
         */
        /**
         * Returns the nth (defined by the index parameter) key in the storage.
         * The order of keys is user-agent defined, so you should not rely on it.
         * @param {?} index   An integer representing the number of the key you want to get the name of. This is a zero-based index.
         * @return {?}
         */
        PromisableService.prototype.getKey = /**
         * Returns the nth (defined by the index parameter) key in the storage.
         * The order of keys is user-agent defined, so you should not rely on it.
         * @param {?} index   An integer representing the number of the key you want to get the name of. This is a zero-based index.
         * @return {?}
         */
            function (index) {
                return new Promise(function (resolve, reject) {
                    if (index < 0) {
                        reject(new Error('index has to be 0 or greater'));
                    }
                    try {
                        resolve(localStorage.key(index));
                    }
                    catch (error) {
                        reject(error);
                    }
                });
            };
        /**
         * Adds tha value with the given key or updates an existing entry.
         * @param key     Key to store.
         * @param value   Value to store.
         * @param prefix  Optional prefix to overwrite the configured one.
         */
        /**
         * Adds tha value with the given key or updates an existing entry.
         * @param {?} key     Key to store.
         * @param {?} value   Value to store.
         * @param {?=} prefix  Optional prefix to overwrite the configured one.
         * @return {?}
         */
        PromisableService.prototype.set = /**
         * Adds tha value with the given key or updates an existing entry.
         * @param {?} key     Key to store.
         * @param {?} value   Value to store.
         * @param {?=} prefix  Optional prefix to overwrite the configured one.
         * @return {?}
         */
            function (key, value, prefix) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    try {
                        if (_this._allowNull
                            || (!_this._allowNull && value !== 'null' && value !== null && value !== undefined)) {
                            localStorage.setItem((prefix || _this._prefix) + "_" + key, value);
                        }
                        else {
                            return _this.remove(key, prefix);
                        }
                        resolve(true);
                    }
                    catch (error) {
                        reject(error);
                    }
                });
            };
        /**
         * Gets the entry specified by the given key or null.
         * @param key     Key identifying the wanted entry.
         * @param prefix  Optional prefix to overwrite the configured one.
         */
        /**
         * Gets the entry specified by the given key or null.
         * @param {?} key     Key identifying the wanted entry.
         * @param {?=} prefix  Optional prefix to overwrite the configured one.
         * @return {?}
         */
        PromisableService.prototype.get = /**
         * Gets the entry specified by the given key or null.
         * @param {?} key     Key identifying the wanted entry.
         * @param {?=} prefix  Optional prefix to overwrite the configured one.
         * @return {?}
         */
            function (key, prefix) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    try {
                        resolve(localStorage.getItem((prefix || _this._prefix) + "_" + key));
                    }
                    catch (error) {
                        reject(error);
                    }
                });
            };
        /**
         * Removes the entry specified by the given key.
         * @param key     Key identifying the entry to remove.
         * @param prefix  Optional prefix to overwrite the configured one.
         */
        /**
         * Removes the entry specified by the given key.
         * @param {?} key     Key identifying the entry to remove.
         * @param {?=} prefix  Optional prefix to overwrite the configured one.
         * @return {?}
         */
        PromisableService.prototype.remove = /**
         * Removes the entry specified by the given key.
         * @param {?} key     Key identifying the entry to remove.
         * @param {?=} prefix  Optional prefix to overwrite the configured one.
         * @return {?}
         */
            function (key, prefix) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    try {
                        localStorage.removeItem((prefix || _this._prefix) + "_" + key);
                        resolve(true);
                    }
                    catch (error) {
                        reject(error);
                    }
                });
            };
        /**
         * Clears all entries of the applications local storage.
         */
        /**
         * Clears all entries of the applications local storage.
         * @return {?}
         */
        PromisableService.prototype.clear = /**
         * Clears all entries of the applications local storage.
         * @return {?}
         */
            function () {
                return new Promise(function (resolve, reject) {
                    try {
                        localStorage.clear();
                        resolve(true);
                    }
                    catch (error) {
                        reject(error);
                    }
                });
            };
        return PromisableService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var getProperty = function (path, object) {
        return path.reduce(function (obj, p) { return (!!obj) ? obj[p] : null; }, object);
    };
    /** @type {?} */
    var setProperty = function (path, value, object, falsyTransformer) {
        /** @type {?} */
        var lastKeyIndex = path.length - 1;
        for (var i = 0; i < lastKeyIndex; ++i) {
            /** @type {?} */
            var key = path[i];
            if (!(key in object)) {
                object[key] = {};
            }
            object = object[key];
        }
        object[path[lastKeyIndex]] = (!value || (typeof value === 'string' && value === 'false'))
            && !!falsyTransformer ? falsyTransformer() : value;
    };
    /** @type {?} */
    var defaultConfig = {
        allowNull: true,
        prefix: 'ngx_local_storage'
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var ModuleConfigToken = new i0.InjectionToken('moduleConfig');

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var LocalStorageService = /** @class */ (function () {
        function LocalStorageService(config) {
            if (config) {
                this._prefix = config.prefix || defaultConfig.prefix;
                this._allowNull = config.allowNull || defaultConfig.allowNull;
            }
            this._promisable = new PromisableService({
                allowNull: this._allowNull,
                prefix: this._prefix
            });
        }
        /**
         * @return {?}
         */
        LocalStorageService.prototype.asPromisable = /**
         * @return {?}
         */
            function () {
                return this._promisable;
            };
        /**
         * Gets the number of entries in the applications local storage.
         */
        /**
         * Gets the number of entries in the applications local storage.
         * @return {?}
         */
        LocalStorageService.prototype.count = /**
         * Gets the number of entries in the applications local storage.
         * @return {?}
         */
            function () {
                try {
                    return localStorage.length;
                }
                catch (error) {
                    console.error(error);
                }
            };
        /**
         * Returns the nth (defined by the index parameter) key in the storage.
         * The order of keys is user-agent defined, so you should not rely on it.
         * @param index   An integer representing the number of the key you want to get the name of. This is a zero-based index.
         */
        /**
         * Returns the nth (defined by the index parameter) key in the storage.
         * The order of keys is user-agent defined, so you should not rely on it.
         * @param {?} index   An integer representing the number of the key you want to get the name of. This is a zero-based index.
         * @return {?}
         */
        LocalStorageService.prototype.getKey = /**
         * Returns the nth (defined by the index parameter) key in the storage.
         * The order of keys is user-agent defined, so you should not rely on it.
         * @param {?} index   An integer representing the number of the key you want to get the name of. This is a zero-based index.
         * @return {?}
         */
            function (index) {
                if (index < 0) {
                    console.error(new Error('index has to be 0 or greater'));
                }
                try {
                    return localStorage.key(index);
                }
                catch (error) {
                    console.error(error);
                }
            };
        /**
         * Adds tha value with the given key or updates an existing entry.
         * @param key     Key to store.
         * @param value   Value to store.
         * @param prefix  Optional prefix to overwrite the configured one.
         */
        /**
         * Adds tha value with the given key or updates an existing entry.
         * @param {?} key     Key to store.
         * @param {?} value   Value to store.
         * @param {?=} prefix  Optional prefix to overwrite the configured one.
         * @return {?}
         */
        LocalStorageService.prototype.set = /**
         * Adds tha value with the given key or updates an existing entry.
         * @param {?} key     Key to store.
         * @param {?} value   Value to store.
         * @param {?=} prefix  Optional prefix to overwrite the configured one.
         * @return {?}
         */
            function (key, value, prefix) {
                if (this._allowNull ||
                    (!this._allowNull &&
                        value !== 'null' &&
                        value !== null &&
                        value !== undefined)) {
                    localStorage.setItem((prefix || this._prefix) + "_" + key, value);
                }
                else {
                    this.remove(key, prefix);
                }
            };
        /**
         * Gets the entry specified by the given key or null.
         * @param key     Key identifying the wanted entry.
         * @param prefix  Optional prefix to overwrite the configured one.
         */
        /**
         * Gets the entry specified by the given key or null.
         * @param {?} key     Key identifying the wanted entry.
         * @param {?=} prefix  Optional prefix to overwrite the configured one.
         * @return {?}
         */
        LocalStorageService.prototype.get = /**
         * Gets the entry specified by the given key or null.
         * @param {?} key     Key identifying the wanted entry.
         * @param {?=} prefix  Optional prefix to overwrite the configured one.
         * @return {?}
         */
            function (key, prefix) {
                try {
                    return localStorage.getItem((prefix || this._prefix) + "_" + key);
                }
                catch (error) {
                    console.error(error);
                }
            };
        /**
         * Removes the entry specified by the given key.
         * @param key     Key identifying the entry to remove.
         * @param prefix  Optional prefix to overwrite the configured one.
         */
        /**
         * Removes the entry specified by the given key.
         * @param {?} key     Key identifying the entry to remove.
         * @param {?=} prefix  Optional prefix to overwrite the configured one.
         * @return {?}
         */
        LocalStorageService.prototype.remove = /**
         * Removes the entry specified by the given key.
         * @param {?} key     Key identifying the entry to remove.
         * @param {?=} prefix  Optional prefix to overwrite the configured one.
         * @return {?}
         */
            function (key, prefix) {
                try {
                    localStorage.removeItem((prefix || this._prefix) + "_" + key);
                }
                catch (error) {
                    console.error(error);
                }
            };
        /**
         * Clears all entries of the applications local storage.
         */
        /**
         * Clears all entries of the applications local storage.
         * @return {?}
         */
        LocalStorageService.prototype.clear = /**
         * Clears all entries of the applications local storage.
         * @return {?}
         */
            function () {
                try {
                    localStorage.clear();
                }
                catch (error) {
                    console.error(error);
                }
            };
        LocalStorageService.decorators = [
            { type: i0.Injectable, args: [{ providedIn: 'root' },] }
        ];
        /** @nocollapse */
        LocalStorageService.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: i0.Inject, args: [ModuleConfigToken,] }] }
            ];
        };
        /** @nocollapse */ LocalStorageService.ngInjectableDef = i0.defineInjectable({ factory: function LocalStorageService_Factory() { return new LocalStorageService(i0.inject(ModuleConfigToken)); }, token: LocalStorageService, providedIn: "root" });
        return LocalStorageService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StorageEventService = /** @class */ (function () {
        function StorageEventService() {
            var _this = this;
            this._eventStream = new rxjs.BehaviorSubject(null);
            rxjs.fromEvent(window, 'storage')
                .subscribe(function (ev) { return _this._eventStream.next(ev); });
        }
        Object.defineProperty(StorageEventService.prototype, "stream", {
            get: /**
             * @return {?}
             */ function () {
                return this._eventStream
                    .asObservable().pipe(operators.filter(function (ev) { return !!ev; }), operators.share());
            },
            enumerable: true,
            configurable: true
        });
        StorageEventService.decorators = [
            { type: i0.Injectable, args: [{ providedIn: 'root' },] }
        ];
        /** @nocollapse */
        StorageEventService.ctorParameters = function () { return []; };
        /** @nocollapse */ StorageEventService.ngInjectableDef = i0.defineInjectable({ factory: function StorageEventService_Factory() { return new StorageEventService(); }, token: StorageEventService, providedIn: "root" });
        return StorageEventService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var LocalStorageDirective = /** @class */ (function () {
        function LocalStorageDirective(er, lss, es) {
            var _this = this;
            this.er = er;
            this.lss = lss;
            this.es = es;
            this.lsDebounce = 0;
            this.lsInitFromStorage = false;
            this.lsStoredValue = new i0.EventEmitter();
            this._valuePath = [];
            this.es.stream.pipe(
            // TODO: filter should be more accurate
            operators.filter(function (ev) { return ev.key.indexOf(_this.lsKey) >= 0; }))
                .subscribe(function (ev) {
                setProperty(_this._valuePath.length ? _this._valuePath : ['value'], ev.newValue, _this.er.nativeElement, _this.lsFalsyTransformer);
            });
        }
        /**
         * @return {?}
         */
        LocalStorageDirective.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
                this._initKey();
                this._initFromStorage();
                this._hookEvent();
            };
        Object.defineProperty(LocalStorageDirective.prototype, "lsValuePath", {
            set: /**
             * @param {?} path
             * @return {?}
             */ function (path) {
                if (path != null) {
                    this._valuePath = Array.isArray(path) ? path : path.split(',');
                }
                else {
                    this._valuePath = [];
                }
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @private
         * @return {?}
         */
        LocalStorageDirective.prototype._initKey = /**
         * @private
         * @return {?}
         */
            function () {
                if (!this.lsKey) {
                    if (!this.er.nativeElement.id && !this.er.nativeElement.name) {
                        throw new Error('No key or element id or name supplied!');
                    }
                    this.lsKey = this.er.nativeElement.id || this.er.nativeElement.name;
                }
            };
        /**
         * @private
         * @return {?}
         */
        LocalStorageDirective.prototype._hookEvent = /**
         * @private
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.lsEvent) {
                    this._eventSubscription = rxjs.fromEvent(this.er.nativeElement, this.lsEvent).pipe(operators.debounceTime(this.lsDebounce))
                        .subscribe(function () {
                        _this.lss.asPromisable().set(_this.lsKey, getProperty(_this._valuePath.length ? _this._valuePath : ['value'], _this.er.nativeElement), _this.lsPrefix)
                            .then(function () {
                            _this.lss.asPromisable().get(_this.lsKey, _this.lsPrefix)
                                .then(function (value) {
                                _this.lsStoredValue.emit(value);
                            })
                                .catch(function (err) { return console.error(err); });
                        })
                            .catch(function (err) { return console.error(err); });
                    });
                }
            };
        /**
         * @private
         * @return {?}
         */
        LocalStorageDirective.prototype._initFromStorage = /**
         * @private
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.lsInitFromStorage) {
                    this.lss.asPromisable().get(this.lsKey, this.lsPrefix)
                        .then(function (storedValue) {
                        setProperty(_this._valuePath.length ? _this._valuePath : ['value'], storedValue, _this.er.nativeElement, _this.lsFalsyTransformer);
                    })
                        .catch(function (err) { return console.error(err); });
                }
            };
        /**
         * @return {?}
         */
        LocalStorageDirective.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                if (this._eventSubscription && !this._eventSubscription.closed) {
                    this._eventSubscription.unsubscribe();
                }
            };
        LocalStorageDirective.decorators = [
            { type: i0.Directive, args: [{
                        selector: '[ngxLocalStorage]'
                    },] }
        ];
        /** @nocollapse */
        LocalStorageDirective.ctorParameters = function () {
            return [
                { type: i0.ElementRef },
                { type: LocalStorageService },
                { type: StorageEventService }
            ];
        };
        LocalStorageDirective.propDecorators = {
            lsKey: [{ type: i0.Input, args: ['ngxLocalStorage',] }],
            lsPrefix: [{ type: i0.Input }],
            lsEvent: [{ type: i0.Input }],
            lsDebounce: [{ type: i0.Input }],
            lsInitFromStorage: [{ type: i0.Input }],
            lsFalsyTransformer: [{ type: i0.Input }],
            lsStoredValue: [{ type: i0.Output }],
            lsValuePath: [{ type: i0.Input }]
        };
        return LocalStorageDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @param {?=} options
     * @return {?}
     */
    function ngxLocalStorage(options) {
        return function (target, propertyDescription) {
            /** @type {?} */
            var service = new LocalStorageService({
                prefix: !!options && !!options.prefix ? options.prefix : ''
            });
            /** @type {?} */
            var key = !!options && !!options.key ? options.key : propertyDescription;
            /** @type {?} */
            var eventService = new StorageEventService();
            eventService.stream.pipe(
            // TODO: filter should be more accurate
            operators.filter(function (ev) { return ev.key.indexOf(key) >= 0; }))
                .subscribe(function (ev) {
                if (!!ev.newValue && typeof ev.newValue === 'string') {
                    if (ev.newValue !== 'null') {
                        target[propertyDescription] = ev.newValue;
                    }
                    else {
                        target[propertyDescription] = !!options.nullTransformer ? options.nullTransformer() : null;
                    }
                }
            });
            Object.defineProperty(target, propertyDescription, {
                get: function () {
                    /** @type {?} */
                    var storageValue = service.get(key);
                    return storageValue == null && !!options.nullTransformer ? options.nullTransformer() : storageValue;
                },
                set: function (value) {
                    service.set(key, value);
                }
            });
        };
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @param {?} moduleConfig
     * @return {?}
     */
    function provideStorageService(moduleConfig) {
        return new LocalStorageService(moduleConfig);
    }
    var NgxLocalStorageModule = /** @class */ (function () {
        function NgxLocalStorageModule(parentModule) {
            if (parentModule) {
                throw new Error('NgxLocalStorageModule is already loaded. Import it in the AppModule only');
            }
        }
        /**
         * @param {?=} config
         * @return {?}
         */
        NgxLocalStorageModule.forRoot = /**
         * @param {?=} config
         * @return {?}
         */
            function (config) {
                return {
                    ngModule: NgxLocalStorageModule,
                    providers: [
                        {
                            provide: ModuleConfigToken,
                            useValue: config
                        },
                        {
                            provide: LocalStorageService,
                            useFactory: provideStorageService,
                            deps: [
                                ModuleConfigToken
                            ]
                        },
                        StorageEventService
                    ]
                };
            };
        NgxLocalStorageModule.decorators = [
            { type: i0.NgModule, args: [{
                        imports: [],
                        declarations: [
                            LocalStorageDirective
                        ],
                        exports: [
                            LocalStorageDirective
                        ]
                    },] }
        ];
        /** @nocollapse */
        NgxLocalStorageModule.ctorParameters = function () {
            return [
                { type: NgxLocalStorageModule, decorators: [{ type: i0.Optional }, { type: i0.SkipSelf }] }
            ];
        };
        return NgxLocalStorageModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    exports.LocalStorageService = LocalStorageService;
    exports.StorageEventService = StorageEventService;
    exports.LocalStorageDirective = LocalStorageDirective;
    exports.ngxLocalStorage = ngxLocalStorage;
    exports.provideStorageService = provideStorageService;
    exports.NgxLocalStorageModule = NgxLocalStorageModule;
    exports.Éµa = ModuleConfigToken;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWxvY2Fsc3RvcmFnZS51bWQuanMubWFwIiwic291cmNlcyI6WyJuZzovL25neC1sb2NhbHN0b3JhZ2UvbGliL3NlcnZpY2VzL3Byb21pc2FibGUuc2VydmljZS50cyIsIm5nOi8vbmd4LWxvY2Fsc3RvcmFnZS9saWIvdXRpbHMudHMiLCJuZzovL25neC1sb2NhbHN0b3JhZ2UvbGliL3Rva2VuLnRzIiwibmc6Ly9uZ3gtbG9jYWxzdG9yYWdlL2xpYi9zZXJ2aWNlcy9uZ3gtbG9jYWxzdG9yYWdlLnNlcnZpY2UudHMiLCJuZzovL25neC1sb2NhbHN0b3JhZ2UvbGliL3NlcnZpY2VzL3N0b3JhZ2UtZXZlbnQuc2VydmljZS50cyIsIm5nOi8vbmd4LWxvY2Fsc3RvcmFnZS9saWIvZGlyZWN0aXZlcy9uZ3gtbG9jYWxzdG9yYWdlLmRpcmVjdGl2ZS50cyIsIm5nOi8vbmd4LWxvY2Fsc3RvcmFnZS9saWIvZGVjb3JhdG9ycy50cyIsIm5nOi8vbmd4LWxvY2Fsc3RvcmFnZS9saWIvbmd4LWxvY2Fsc3RvcmFnZS5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYm9ob2ZmaSBvbiAyMi4wNS4yMDE3LlxyXG4qL1xyXG5pbXBvcnQge01vZHVsZUNvbmZpZ30gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvbWlzYWJsZVNlcnZpY2Uge1xyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IF9wcmVmaXg6IHN0cmluZztcclxuICBwcml2YXRlIHJlYWRvbmx5IF9hbGxvd051bGw6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZz86IE1vZHVsZUNvbmZpZykge1xyXG4gICAgaWYgKGNvbmZpZykge1xyXG4gICAgICB0aGlzLl9wcmVmaXggPSBjb25maWcucHJlZml4IHx8IHRoaXMuX3ByZWZpeDtcclxuICAgICAgdGhpcy5fYWxsb3dOdWxsID0gY29uZmlnLmFsbG93TnVsbCB8fCB0aGlzLl9hbGxvd051bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIHRoZSBudW1iZXIgb2YgZW50cmllcyBpbiB0aGUgYXBwbGljYXRpb25zIGxvY2FsIHN0b3JhZ2UuXHJcbiAgICovXHJcbiAgY291bnQoKTogUHJvbWlzZTxudW1iZXI+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgcmVzb2x2ZShsb2NhbFN0b3JhZ2UubGVuZ3RoKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIG50aCAoZGVmaW5lZCBieSB0aGUgaW5kZXggcGFyYW1ldGVyKSBrZXkgaW4gdGhlIHN0b3JhZ2UuXHJcbiAgICogVGhlIG9yZGVyIG9mIGtleXMgaXMgdXNlci1hZ2VudCBkZWZpbmVkLCBzbyB5b3Ugc2hvdWxkIG5vdCByZWx5IG9uIGl0LlxyXG4gICAqIEBwYXJhbSBpbmRleCAgIEFuIGludGVnZXIgcmVwcmVzZW50aW5nIHRoZSBudW1iZXIgb2YgdGhlIGtleSB5b3Ugd2FudCB0byBnZXQgdGhlIG5hbWUgb2YuIFRoaXMgaXMgYSB6ZXJvLWJhc2VkIGluZGV4LlxyXG4gICAqL1xyXG4gIGdldEtleShpbmRleDogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nIHwgbnVsbD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBpZiAoaW5kZXggPCAwKSB7XHJcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignaW5kZXggaGFzIHRvIGJlIDAgb3IgZ3JlYXRlcicpKTtcclxuICAgICAgfVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHJlc29sdmUobG9jYWxTdG9yYWdlLmtleShpbmRleCkpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyB0aGEgdmFsdWUgd2l0aCB0aGUgZ2l2ZW4ga2V5IG9yIHVwZGF0ZXMgYW4gZXhpc3RpbmcgZW50cnkuXHJcbiAgICogQHBhcmFtIGtleSAgICAgS2V5IHRvIHN0b3JlLlxyXG4gICAqIEBwYXJhbSB2YWx1ZSAgIFZhbHVlIHRvIHN0b3JlLlxyXG4gICAqIEBwYXJhbSBwcmVmaXggIE9wdGlvbmFsIHByZWZpeCB0byBvdmVyd3JpdGUgdGhlIGNvbmZpZ3VyZWQgb25lLlxyXG4gICAqL1xyXG4gIHNldChrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgcHJlZml4Pzogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmICh0aGlzLl9hbGxvd051bGxcclxuICAgICAgICAgIHx8ICghdGhpcy5fYWxsb3dOdWxsICYmIHZhbHVlICE9PSAnbnVsbCcgJiYgdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCkpIHtcclxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGAke3ByZWZpeCB8fCB0aGlzLl9wcmVmaXh9XyR7a2V5fWAsIHZhbHVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlKGtleSwgcHJlZml4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgdGhlIGVudHJ5IHNwZWNpZmllZCBieSB0aGUgZ2l2ZW4ga2V5IG9yIG51bGwuXHJcbiAgICogQHBhcmFtIGtleSAgICAgS2V5IGlkZW50aWZ5aW5nIHRoZSB3YW50ZWQgZW50cnkuXHJcbiAgICogQHBhcmFtIHByZWZpeCAgT3B0aW9uYWwgcHJlZml4IHRvIG92ZXJ3cml0ZSB0aGUgY29uZmlndXJlZCBvbmUuXHJcbiAgICovXHJcbiAgZ2V0KGtleTogc3RyaW5nLCBwcmVmaXg/OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmcgfCBudWxsPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgcmVzb2x2ZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgJHtwcmVmaXggfHwgdGhpcy5fcHJlZml4fV8ke2tleX1gKSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIHRoZSBlbnRyeSBzcGVjaWZpZWQgYnkgdGhlIGdpdmVuIGtleS5cclxuICAgKiBAcGFyYW0ga2V5ICAgICBLZXkgaWRlbnRpZnlpbmcgdGhlIGVudHJ5IHRvIHJlbW92ZS5cclxuICAgKiBAcGFyYW0gcHJlZml4ICBPcHRpb25hbCBwcmVmaXggdG8gb3ZlcndyaXRlIHRoZSBjb25maWd1cmVkIG9uZS5cclxuICAgKi9cclxuICByZW1vdmUoa2V5OiBzdHJpbmcsIHByZWZpeD86IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgJHtwcmVmaXggfHwgdGhpcy5fcHJlZml4fV8ke2tleX1gKTtcclxuICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYXJzIGFsbCBlbnRyaWVzIG9mIHRoZSBhcHBsaWNhdGlvbnMgbG9jYWwgc3RvcmFnZS5cclxuICAgKi9cclxuICBjbGVhcigpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XHJcbiAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYm9ob2ZmaSBvbiAwNC4wNC4yMDE3LlxyXG4gKi9cclxuaW1wb3J0IHtNb2R1bGVDb25maWd9IGZyb20gJy4vaW50ZXJmYWNlcyc7XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0UHJvcGVydHkgPSAocGF0aDogc3RyaW5nW10sIG9iamVjdDogYW55KSA9PlxyXG4gIHBhdGgucmVkdWNlKChvYmo6IGFueSwgcDogYW55KSA9PiAoISFvYmopID8gb2JqW3BdIDogbnVsbCwgb2JqZWN0KTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZXRQcm9wZXJ0eSA9IChwYXRoOiBzdHJpbmdbXSB8IHN0cmluZywgdmFsdWU6IGFueSwgb2JqZWN0OiBhbnksIGZhbHN5VHJhbnNmb3JtZXI/OiAoKSA9PiBhbnkpID0+IHtcclxuICBjb25zdCBsYXN0S2V5SW5kZXggPSBwYXRoLmxlbmd0aCAtIDE7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYXN0S2V5SW5kZXg7ICsraSkge1xyXG4gICAgY29uc3Qga2V5ID0gcGF0aFtpXTtcclxuICAgIGlmICghKGtleSBpbiBvYmplY3QpKSB7XHJcbiAgICAgIG9iamVjdFtrZXldID0ge307XHJcbiAgICB9XHJcbiAgICBvYmplY3QgPSBvYmplY3Rba2V5XTtcclxuICB9XHJcbiAgb2JqZWN0W3BhdGhbbGFzdEtleUluZGV4XV0gPSAoIXZhbHVlIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlID09PSAnZmFsc2UnKSlcclxuICAmJiAhIWZhbHN5VHJhbnNmb3JtZXIgPyBmYWxzeVRyYW5zZm9ybWVyKCkgOiB2YWx1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWZhdWx0Q29uZmlnOiBNb2R1bGVDb25maWcgPSB7XHJcbiAgYWxsb3dOdWxsOiB0cnVlLFxyXG4gIHByZWZpeDogJ25neF9sb2NhbF9zdG9yYWdlJ1xyXG59O1xyXG4iLCJpbXBvcnQge01vZHVsZUNvbmZpZ30gZnJvbSAnLi9pbnRlcmZhY2VzJztcclxuaW1wb3J0IHtJbmplY3Rpb25Ub2tlbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5leHBvcnQgY29uc3QgTW9kdWxlQ29uZmlnVG9rZW4gPSBuZXcgSW5qZWN0aW9uVG9rZW48TW9kdWxlQ29uZmlnPignbW9kdWxlQ29uZmlnJyk7XHJcbiIsImltcG9ydCB7SW5qZWN0YWJsZSwgT3B0aW9uYWwsIEluamVjdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQge01vZHVsZUNvbmZpZ30gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7UHJvbWlzYWJsZVNlcnZpY2V9IGZyb20gJy4vcHJvbWlzYWJsZS5zZXJ2aWNlJztcclxuaW1wb3J0IHtkZWZhdWx0Q29uZmlnfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCB7IE1vZHVsZUNvbmZpZ1Rva2VuIH0gZnJvbSAnLi4vdG9rZW4nO1xyXG5cclxuQEluamVjdGFibGUoe3Byb3ZpZGVkSW46ICdyb290J30pXHJcbmV4cG9ydCBjbGFzcyBMb2NhbFN0b3JhZ2VTZXJ2aWNlIHtcclxuICBwcml2YXRlIHJlYWRvbmx5IF9wcmVmaXg6IHN0cmluZztcclxuICBwcml2YXRlIHJlYWRvbmx5IF9hbGxvd051bGw6IGJvb2xlYW47XHJcbiAgcHJpdmF0ZSByZWFkb25seSBfcHJvbWlzYWJsZTogUHJvbWlzYWJsZVNlcnZpY2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKEBJbmplY3QoTW9kdWxlQ29uZmlnVG9rZW4pIGNvbmZpZz86IE1vZHVsZUNvbmZpZykge1xyXG4gICAgaWYgKGNvbmZpZykge1xyXG4gICAgICB0aGlzLl9wcmVmaXggPSBjb25maWcucHJlZml4IHx8IGRlZmF1bHRDb25maWcucHJlZml4O1xyXG4gICAgICB0aGlzLl9hbGxvd051bGwgPSBjb25maWcuYWxsb3dOdWxsIHx8IGRlZmF1bHRDb25maWcuYWxsb3dOdWxsO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fcHJvbWlzYWJsZSA9IG5ldyBQcm9taXNhYmxlU2VydmljZSh7XHJcbiAgICAgIGFsbG93TnVsbDogdGhpcy5fYWxsb3dOdWxsLFxyXG4gICAgICBwcmVmaXg6IHRoaXMuX3ByZWZpeFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc1Byb21pc2FibGUoKTogUHJvbWlzYWJsZVNlcnZpY2Uge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2FibGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIHRoZSBudW1iZXIgb2YgZW50cmllcyBpbiB0aGUgYXBwbGljYXRpb25zIGxvY2FsIHN0b3JhZ2UuXHJcbiAgICovXHJcbiAgY291bnQoKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UubGVuZ3RoO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBudGggKGRlZmluZWQgYnkgdGhlIGluZGV4IHBhcmFtZXRlcikga2V5IGluIHRoZSBzdG9yYWdlLlxyXG4gICAqIFRoZSBvcmRlciBvZiBrZXlzIGlzIHVzZXItYWdlbnQgZGVmaW5lZCwgc28geW91IHNob3VsZCBub3QgcmVseSBvbiBpdC5cclxuICAgKiBAcGFyYW0gaW5kZXggICBBbiBpbnRlZ2VyIHJlcHJlc2VudGluZyB0aGUgbnVtYmVyIG9mIHRoZSBrZXkgeW91IHdhbnQgdG8gZ2V0IHRoZSBuYW1lIG9mLiBUaGlzIGlzIGEgemVyby1iYXNlZCBpbmRleC5cclxuICAgKi9cclxuICBnZXRLZXkoaW5kZXg6IG51bWJlcik6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQge1xyXG4gICAgaWYgKGluZGV4IDwgMCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKG5ldyBFcnJvcignaW5kZXggaGFzIHRvIGJlIDAgb3IgZ3JlYXRlcicpKTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2Uua2V5KGluZGV4KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyB0aGEgdmFsdWUgd2l0aCB0aGUgZ2l2ZW4ga2V5IG9yIHVwZGF0ZXMgYW4gZXhpc3RpbmcgZW50cnkuXHJcbiAgICogQHBhcmFtIGtleSAgICAgS2V5IHRvIHN0b3JlLlxyXG4gICAqIEBwYXJhbSB2YWx1ZSAgIFZhbHVlIHRvIHN0b3JlLlxyXG4gICAqIEBwYXJhbSBwcmVmaXggIE9wdGlvbmFsIHByZWZpeCB0byBvdmVyd3JpdGUgdGhlIGNvbmZpZ3VyZWQgb25lLlxyXG4gICAqL1xyXG4gIHNldChrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgcHJlZml4Pzogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuX2FsbG93TnVsbCB8fFxyXG4gICAgICAoIXRoaXMuX2FsbG93TnVsbCAmJlxyXG4gICAgICAgIHZhbHVlICE9PSAnbnVsbCcgJiZcclxuICAgICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxyXG4gICAgICAgIHZhbHVlICE9PSB1bmRlZmluZWQpXHJcbiAgICApIHtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYCR7cHJlZml4IHx8IHRoaXMuX3ByZWZpeH1fJHtrZXl9YCwgdmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5yZW1vdmUoa2V5LCBwcmVmaXgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0cyB0aGUgZW50cnkgc3BlY2lmaWVkIGJ5IHRoZSBnaXZlbiBrZXkgb3IgbnVsbC5cclxuICAgKiBAcGFyYW0ga2V5ICAgICBLZXkgaWRlbnRpZnlpbmcgdGhlIHdhbnRlZCBlbnRyeS5cclxuICAgKiBAcGFyYW0gcHJlZml4ICBPcHRpb25hbCBwcmVmaXggdG8gb3ZlcndyaXRlIHRoZSBjb25maWd1cmVkIG9uZS5cclxuICAgKi9cclxuICBnZXQoa2V5OiBzdHJpbmcsIHByZWZpeD86IHN0cmluZyk6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGAke3ByZWZpeCB8fCB0aGlzLl9wcmVmaXh9XyR7a2V5fWApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIHRoZSBlbnRyeSBzcGVjaWZpZWQgYnkgdGhlIGdpdmVuIGtleS5cclxuICAgKiBAcGFyYW0ga2V5ICAgICBLZXkgaWRlbnRpZnlpbmcgdGhlIGVudHJ5IHRvIHJlbW92ZS5cclxuICAgKiBAcGFyYW0gcHJlZml4ICBPcHRpb25hbCBwcmVmaXggdG8gb3ZlcndyaXRlIHRoZSBjb25maWd1cmVkIG9uZS5cclxuICAgKi9cclxuICByZW1vdmUoa2V5OiBzdHJpbmcsIHByZWZpeD86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYCR7cHJlZml4IHx8IHRoaXMuX3ByZWZpeH1fJHtrZXl9YCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENsZWFycyBhbGwgZW50cmllcyBvZiB0aGUgYXBwbGljYXRpb25zIGxvY2FsIHN0b3JhZ2UuXHJcbiAgICovXHJcbiAgY2xlYXIoKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBib2hvZmZpIG9uIDMxLjAxLjIwMTguXHJcbiAqL1xyXG5pbXBvcnQge0luamVjdGFibGV9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge2Zyb21FdmVudCBhcyBvYnNlcnZhYmxlRnJvbUV2ZW50LCBCZWhhdmlvclN1YmplY3QsIE9ic2VydmFibGV9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQge3NoYXJlLCBmaWx0ZXJ9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbkBJbmplY3RhYmxlKHtwcm92aWRlZEluOiAncm9vdCd9KVxyXG5leHBvcnQgY2xhc3MgU3RvcmFnZUV2ZW50U2VydmljZSB7XHJcblxyXG4gIHByaXZhdGUgX2V2ZW50U3RyZWFtOiBCZWhhdmlvclN1YmplY3Q8U3RvcmFnZUV2ZW50PiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8U3RvcmFnZUV2ZW50PihudWxsKTtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBvYnNlcnZhYmxlRnJvbUV2ZW50KHdpbmRvdywgJ3N0b3JhZ2UnKVxyXG4gICAgICAuc3Vic2NyaWJlKChldjogU3RvcmFnZUV2ZW50KSA9PiB0aGlzLl9ldmVudFN0cmVhbS5uZXh0KGV2KSk7XHJcbiAgfVxyXG5cclxuICBnZXQgc3RyZWFtKCk6IE9ic2VydmFibGU8U3RvcmFnZUV2ZW50PiB7XHJcbiAgICByZXR1cm4gdGhpcy5fZXZlbnRTdHJlYW1cclxuICAgICAgLmFzT2JzZXJ2YWJsZSgpLnBpcGUoXHJcbiAgICAgICAgZmlsdGVyKGV2ID0+ICEhZXYpLFxyXG4gICAgICAgIHNoYXJlKClcclxuICAgICAgKTtcclxuICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYm9ob2ZmaSBvbiAwMy4wNC4yMDE3LlxyXG4gKi9cclxuaW1wb3J0IHtBZnRlclZpZXdJbml0LCBEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uRGVzdHJveSwgT3V0cHV0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtmcm9tRXZlbnQgYXMgb2JzZXJ2YWJsZUZyb21FdmVudCwgU3Vic2NyaXB0aW9ufSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHtkZWJvdW5jZVRpbWUsIGZpbHRlcn0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5cclxuaW1wb3J0IHtnZXRQcm9wZXJ0eSwgc2V0UHJvcGVydHl9IGZyb20gJy4uL3V0aWxzJztcclxuaW1wb3J0IHtMb2NhbFN0b3JhZ2VTZXJ2aWNlfSBmcm9tICcuLi9zZXJ2aWNlcy9uZ3gtbG9jYWxzdG9yYWdlLnNlcnZpY2UnO1xyXG5pbXBvcnQge1N0b3JhZ2VFdmVudFNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL3N0b3JhZ2UtZXZlbnQuc2VydmljZSc7XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICBzZWxlY3RvcjogJ1tuZ3hMb2NhbFN0b3JhZ2VdJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgTG9jYWxTdG9yYWdlRGlyZWN0aXZlIGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcclxuXHJcbiAgQElucHV0KCduZ3hMb2NhbFN0b3JhZ2UnKVxyXG4gIGxzS2V5OiBzdHJpbmc7XHJcbiAgQElucHV0KClcclxuICBsc1ByZWZpeDogc3RyaW5nO1xyXG4gIEBJbnB1dCgpXHJcbiAgbHNFdmVudDogc3RyaW5nO1xyXG4gIEBJbnB1dCgpXHJcbiAgbHNEZWJvdW5jZSA9IDA7XHJcbiAgQElucHV0KClcclxuICBsc0luaXRGcm9tU3RvcmFnZSA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpXHJcbiAgbHNGYWxzeVRyYW5zZm9ybWVyPzogKCkgPT4gYW55O1xyXG5cclxuICBAT3V0cHV0KClcclxuICBsc1N0b3JlZFZhbHVlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIHByaXZhdGUgX2V2ZW50U3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcbiAgcHJpdmF0ZSBfdmFsdWVQYXRoOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVyOiBFbGVtZW50UmVmLFxyXG4gICAgICAgICAgICAgIHByaXZhdGUgbHNzOiBMb2NhbFN0b3JhZ2VTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgIHByaXZhdGUgZXM6IFN0b3JhZ2VFdmVudFNlcnZpY2UpIHtcclxuXHJcbiAgICB0aGlzLmVzLnN0cmVhbS5waXBlKFxyXG4gICAgLy8gVE9ETzogZmlsdGVyIHNob3VsZCBiZSBtb3JlIGFjY3VyYXRlXHJcbiAgICAgIGZpbHRlcigoZXY6IFN0b3JhZ2VFdmVudCkgPT4gZXYua2V5LmluZGV4T2YodGhpcy5sc0tleSkgPj0gMClcclxuICAgIClcclxuICAgICAgLnN1YnNjcmliZSgoZXY6IFN0b3JhZ2VFdmVudCkgPT4ge1xyXG4gICAgICAgIHNldFByb3BlcnR5KHRoaXMuX3ZhbHVlUGF0aC5sZW5ndGggPyB0aGlzLl92YWx1ZVBhdGggOiBbJ3ZhbHVlJ10sIGV2Lm5ld1ZhbHVlLCB0aGlzLmVyLm5hdGl2ZUVsZW1lbnQsIHRoaXMubHNGYWxzeVRyYW5zZm9ybWVyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLl9pbml0S2V5KCk7XHJcbiAgICB0aGlzLl9pbml0RnJvbVN0b3JhZ2UoKTtcclxuICAgIHRoaXMuX2hvb2tFdmVudCgpO1xyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgbHNWYWx1ZVBhdGgocGF0aDogYW55W10gfCBzdHJpbmcpIHtcclxuICAgIGlmIChwYXRoICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5fdmFsdWVQYXRoID0gQXJyYXkuaXNBcnJheShwYXRoKSA/IHBhdGggOiBwYXRoLnNwbGl0KCcsJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl92YWx1ZVBhdGggPSBbXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2luaXRLZXkoKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMubHNLZXkpIHtcclxuICAgICAgaWYgKCF0aGlzLmVyLm5hdGl2ZUVsZW1lbnQuaWQgJiYgIXRoaXMuZXIubmF0aXZlRWxlbWVudC5uYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBrZXkgb3IgZWxlbWVudCBpZCBvciBuYW1lIHN1cHBsaWVkIScpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMubHNLZXkgPSB0aGlzLmVyLm5hdGl2ZUVsZW1lbnQuaWQgfHwgdGhpcy5lci5uYXRpdmVFbGVtZW50Lm5hbWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9ob29rRXZlbnQoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5sc0V2ZW50KSB7XHJcbiAgICAgIHRoaXMuX2V2ZW50U3Vic2NyaXB0aW9uID0gb2JzZXJ2YWJsZUZyb21FdmVudCh0aGlzLmVyLm5hdGl2ZUVsZW1lbnQsIHRoaXMubHNFdmVudCkucGlwZShcclxuICAgICAgICBkZWJvdW5jZVRpbWUodGhpcy5sc0RlYm91bmNlKSlcclxuICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgIHRoaXMubHNzLmFzUHJvbWlzYWJsZSgpLnNldCh0aGlzLmxzS2V5LFxyXG4gICAgICAgICAgICBnZXRQcm9wZXJ0eSh0aGlzLl92YWx1ZVBhdGgubGVuZ3RoID8gdGhpcy5fdmFsdWVQYXRoIDogWyd2YWx1ZSddLCB0aGlzLmVyLm5hdGl2ZUVsZW1lbnQpLFxyXG4gICAgICAgICAgICB0aGlzLmxzUHJlZml4KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5sc3MuYXNQcm9taXNhYmxlKCkuZ2V0KHRoaXMubHNLZXksIHRoaXMubHNQcmVmaXgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigodmFsdWU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmxzU3RvcmVkVmFsdWUuZW1pdCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9pbml0RnJvbVN0b3JhZ2UoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5sc0luaXRGcm9tU3RvcmFnZSkge1xyXG4gICAgICB0aGlzLmxzcy5hc1Byb21pc2FibGUoKS5nZXQodGhpcy5sc0tleSwgdGhpcy5sc1ByZWZpeClcclxuICAgICAgICAudGhlbigoc3RvcmVkVmFsdWU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgc2V0UHJvcGVydHkodGhpcy5fdmFsdWVQYXRoLmxlbmd0aCA/IHRoaXMuX3ZhbHVlUGF0aCA6IFsndmFsdWUnXSwgc3RvcmVkVmFsdWUsIHRoaXMuZXIubmF0aXZlRWxlbWVudCwgdGhpcy5sc0ZhbHN5VHJhbnNmb3JtZXIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5fZXZlbnRTdWJzY3JpcHRpb24gJiYgIXRoaXMuX2V2ZW50U3Vic2NyaXB0aW9uLmNsb3NlZCkge1xyXG4gICAgICB0aGlzLl9ldmVudFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBib2hvZmZpIG9uIDIyLjA1LjIwMTcuXHJcbiAqL1xyXG5pbXBvcnQge2ZpbHRlcn0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5cclxuaW1wb3J0IHtEZWNvcmF0b3JPcHRzfSBmcm9tICcuL2ludGVyZmFjZXMnO1xyXG5pbXBvcnQge0xvY2FsU3RvcmFnZVNlcnZpY2V9IGZyb20gJy4vc2VydmljZXMvbmd4LWxvY2Fsc3RvcmFnZS5zZXJ2aWNlJztcclxuaW1wb3J0IHtTdG9yYWdlRXZlbnRTZXJ2aWNlfSBmcm9tICcuL3NlcnZpY2VzL3N0b3JhZ2UtZXZlbnQuc2VydmljZSc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbmd4TG9jYWxTdG9yYWdlKG9wdGlvbnM/OiBEZWNvcmF0b3JPcHRzKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQ6IE9iamVjdCwgcHJvcGVydHlEZXNjcmlwdGlvbjogc3RyaW5nKSB7XHJcblxyXG4gICAgY29uc3Qgc2VydmljZTogTG9jYWxTdG9yYWdlU2VydmljZSA9IG5ldyBMb2NhbFN0b3JhZ2VTZXJ2aWNlKHtcclxuICAgICAgcHJlZml4OiAhIW9wdGlvbnMgJiYgISFvcHRpb25zLnByZWZpeCA/IG9wdGlvbnMucHJlZml4IDogJydcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGtleSA9ICEhb3B0aW9ucyAmJiAhIW9wdGlvbnMua2V5ID8gb3B0aW9ucy5rZXkgOiBwcm9wZXJ0eURlc2NyaXB0aW9uO1xyXG5cclxuICAgIGNvbnN0IGV2ZW50U2VydmljZTogU3RvcmFnZUV2ZW50U2VydmljZSA9IG5ldyBTdG9yYWdlRXZlbnRTZXJ2aWNlKCk7XHJcbiAgICBldmVudFNlcnZpY2Uuc3RyZWFtLnBpcGUoXHJcbiAgICAgIC8vIFRPRE86IGZpbHRlciBzaG91bGQgYmUgbW9yZSBhY2N1cmF0ZVxyXG4gICAgICBmaWx0ZXIoKGV2OiBTdG9yYWdlRXZlbnQpID0+IGV2LmtleS5pbmRleE9mKGtleSkgPj0gMClcclxuICAgIClcclxuICAgICAgLnN1YnNjcmliZSgoZXY6IFN0b3JhZ2VFdmVudCkgPT4ge1xyXG4gICAgICAgIGlmICghIWV2Lm5ld1ZhbHVlICYmIHR5cGVvZiBldi5uZXdWYWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgIGlmIChldi5uZXdWYWx1ZSAhPT0gJ251bGwnKSB7XHJcbiAgICAgICAgICAgIHRhcmdldFtwcm9wZXJ0eURlc2NyaXB0aW9uXSA9IGV2Lm5ld1ZhbHVlO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGFyZ2V0W3Byb3BlcnR5RGVzY3JpcHRpb25dID0gISFvcHRpb25zLm51bGxUcmFuc2Zvcm1lciA/IG9wdGlvbnMubnVsbFRyYW5zZm9ybWVyKCkgOiBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlEZXNjcmlwdGlvbiwge1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCBzdG9yYWdlVmFsdWUgPSBzZXJ2aWNlLmdldChrZXkpO1xyXG4gICAgICAgIHJldHVybiBzdG9yYWdlVmFsdWUgPT0gbnVsbCAmJiAhIW9wdGlvbnMubnVsbFRyYW5zZm9ybWVyID8gb3B0aW9ucy5udWxsVHJhbnNmb3JtZXIoKSA6IHN0b3JhZ2VWYWx1ZTtcclxuICAgICAgfSxcclxuICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWU6IGFueSkge1xyXG4gICAgICAgIHNlcnZpY2Uuc2V0KGtleSwgdmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG59XHJcbiIsImltcG9ydCB7TW9kdWxlV2l0aFByb3ZpZGVycywgTmdNb2R1bGUsIE9wdGlvbmFsLCBTa2lwU2VsZn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQge01vZHVsZUNvbmZpZ30gZnJvbSAnLi9pbnRlcmZhY2VzJztcclxuaW1wb3J0IHtMb2NhbFN0b3JhZ2VTZXJ2aWNlfSBmcm9tICcuL3NlcnZpY2VzL25neC1sb2NhbHN0b3JhZ2Uuc2VydmljZSc7XHJcbmltcG9ydCB7U3RvcmFnZUV2ZW50U2VydmljZX0gZnJvbSAnLi9zZXJ2aWNlcy9zdG9yYWdlLWV2ZW50LnNlcnZpY2UnO1xyXG5pbXBvcnQge0xvY2FsU3RvcmFnZURpcmVjdGl2ZX0gZnJvbSAnLi9kaXJlY3RpdmVzL25neC1sb2NhbHN0b3JhZ2UuZGlyZWN0aXZlJztcclxuaW1wb3J0IHtNb2R1bGVDb25maWdUb2tlbn0gZnJvbSAnLi90b2tlbic7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJvdmlkZVN0b3JhZ2VTZXJ2aWNlKG1vZHVsZUNvbmZpZzogTW9kdWxlQ29uZmlnKTogTG9jYWxTdG9yYWdlU2VydmljZSB7XHJcbiAgcmV0dXJuIG5ldyBMb2NhbFN0b3JhZ2VTZXJ2aWNlKG1vZHVsZUNvbmZpZyk7XHJcbn1cclxuXHJcbkBOZ01vZHVsZSh7XHJcbiAgaW1wb3J0czogW1xyXG4gIF0sXHJcbiAgZGVjbGFyYXRpb25zOiBbXHJcbiAgICBMb2NhbFN0b3JhZ2VEaXJlY3RpdmVcclxuICBdLFxyXG4gIGV4cG9ydHM6IFtcclxuICAgIExvY2FsU3RvcmFnZURpcmVjdGl2ZVxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIE5neExvY2FsU3RvcmFnZU1vZHVsZSB7XHJcbiAgc3RhdGljIGZvclJvb3QoY29uZmlnPzogTW9kdWxlQ29uZmlnKTogTW9kdWxlV2l0aFByb3ZpZGVycyB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuZ01vZHVsZTogTmd4TG9jYWxTdG9yYWdlTW9kdWxlLFxyXG4gICAgICBwcm92aWRlcnM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcm92aWRlOiBNb2R1bGVDb25maWdUb2tlbixcclxuICAgICAgICAgIHVzZVZhbHVlOiBjb25maWdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByb3ZpZGU6IExvY2FsU3RvcmFnZVNlcnZpY2UsXHJcbiAgICAgICAgICB1c2VGYWN0b3J5OiBwcm92aWRlU3RvcmFnZVNlcnZpY2UsXHJcbiAgICAgICAgICBkZXBzOiBbXHJcbiAgICAgICAgICAgIE1vZHVsZUNvbmZpZ1Rva2VuXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBTdG9yYWdlRXZlbnRTZXJ2aWNlXHJcbiAgICAgIF1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBAU2tpcFNlbGYoKSBwYXJlbnRNb2R1bGU6IE5neExvY2FsU3RvcmFnZU1vZHVsZSkge1xyXG4gICAgaWYgKHBhcmVudE1vZHVsZSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05neExvY2FsU3RvcmFnZU1vZHVsZSBpcyBhbHJlYWR5IGxvYWRlZC4gSW1wb3J0IGl0IGluIHRoZSBBcHBNb2R1bGUgb25seScpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiSW5qZWN0aW9uVG9rZW4iLCJJbmplY3RhYmxlIiwiSW5qZWN0IiwiQmVoYXZpb3JTdWJqZWN0Iiwib2JzZXJ2YWJsZUZyb21FdmVudCIsImZpbHRlciIsInNoYXJlIiwiRXZlbnRFbWl0dGVyIiwiZGVib3VuY2VUaW1lIiwiRGlyZWN0aXZlIiwiRWxlbWVudFJlZiIsIklucHV0IiwiT3V0cHV0IiwiTmdNb2R1bGUiLCJPcHRpb25hbCIsIlNraXBTZWxmIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0lBS0E7UUFLRSwyQkFBWSxNQUFxQjtZQUMvQixJQUFJLE1BQU0sRUFBRTtnQkFDVixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFDN0MsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUM7YUFDdkQ7U0FDRjs7Ozs7Ozs7UUFLRCxpQ0FBSzs7OztZQUFMO2dCQUNFLE9BQU8sSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFPLEVBQUUsTUFBTTtvQkFDakMsSUFBSTt3QkFDRixPQUFPLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO3FCQUM5QjtvQkFBQyxPQUFPLEtBQUssRUFBRTt3QkFDZCxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7cUJBQ2Y7aUJBQ0YsQ0FBQyxDQUFDO2FBQ0o7Ozs7Ozs7Ozs7OztRQU9ELGtDQUFNOzs7Ozs7WUFBTixVQUFPLEtBQWE7Z0JBQ2xCLE9BQU8sSUFBSSxPQUFPLENBQWdCLFVBQUMsT0FBTyxFQUFFLE1BQU07b0JBQ2hELElBQUksS0FBSyxHQUFHLENBQUMsRUFBRTt3QkFDYixNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsOEJBQThCLENBQUMsQ0FBQyxDQUFDO3FCQUNuRDtvQkFDRCxJQUFJO3dCQUNGLE9BQU8sQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7cUJBQ2xDO29CQUFDLE9BQU8sS0FBSyxFQUFFO3dCQUNkLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztxQkFDZjtpQkFDRixDQUFDLENBQUM7YUFDSjs7Ozs7Ozs7Ozs7Ozs7UUFRRCwrQkFBRzs7Ozs7OztZQUFILFVBQUksR0FB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