<app-chef-service-role-test></app-chef-service-role-test>
<app-navbar></app-navbar>
<div class="modal fade" id="myModal" role="dialog">



  <div class="modal-dialog" >
    <div class="modal-content" >
      <div class="modal-header" >
        Détails de demande
        <span *ngIf="demandeDetails !== null && demandeDetails.motifRefus !== '' &&  demandeDetails.motifRefus !== null" style ="color: red;">(Refusé !)</span>
      </div>
      <div class="modal-body" *ngIf="demandeDetails !== null">
        <dl class="dl-horizontal" *ngIf="typeDemande === 'sortie'">
          <dt>
            Collaborateur
          </dt>
          <dd>
            {{demandeDetails.collaborateur.nom + ' ' + demandeDetails.collaborateur.prenom }}
          </dd>
          <dt>
            Date de demande
          </dt>
          <dd>
            {{demandeDetails.dateDemande | date : 'dd-MM-yyyy'}}
          </dd>
          <dt>
            Status
          </dt>
          <dd>
            {{demandeDetails.status}}
          </dd>
          <dt>
            Date de sortie
          </dt>
          <dd>
            {{demandeDetails.dateSortie | date : 'dd-MM-yyyy' }}
          </dd>
          <dt>
            Heure de sortie
          </dt>
          <dd>
            {{demandeDetails.heureSortie }}
          </dd>
          <dt>
            Heure de retour
          </dt>
          <dd>
            {{demandeDetails.heureReteur }}
          </dd>
          <dt>
            Motif de sortoie
          </dt>
          <dd>
            {{demandeDetails.motifSortie.nom}}
          </dd>
          <dt>
            Observation
          </dt>
          <dd>
            {{demandeDetails.observation}}
          </dd>
          <dt *ngIf="demandeDetails.motifRefus !== '' &&  demandeDetails.motifRefus !== null">
            Motif de refus
          </dt>
          <dd *ngIf="demandeDetails.motifRefus !== '' &&  demandeDetails.motifRefus !== null">
            {{demandeDetails.motifRefus}}
          </dd>
          <dd>&nbsp;</dd><dt>&nbsp;</dt>
          <dt *ngIf="demandeDetails.refuse">
            Motif de refu
          </dt>
          <dd *ngIf="demandeDetails.refuse">
            <div class="controls">
              <textarea class="form-control" placeholder="Motif de refus" [ngStyle]="{'border-color':(demandeDetails.isErr )? 'red' : '' }" cols="30" rows="3" style="resize: none" [(ngModel)]="motifRefus"></textarea>
              <br>
              <span class="help-inline" style=" color:red;" *ngIf="demandeDetails.isErr ">Veuillez montrer votre motif de refus</span>
            </div>
          </dd>
        </dl>
        <dl class="dl-horizontal" *ngIf="typeDemande === 'attestation'">
          <dt>
            Collaborateur
          </dt>
          <dd>
            {{demandeDetails.collaborateur.nom + ' ' + demandeDetails.collaborateur.prenom }}
          </dd>
          <dt>
            Date de demande
          </dt>
          <dd>
            {{demandeDetails.dateDemande | date : 'dd-MM-yyyy'}}
          </dd>
          <dt>
            Status
          </dt>
          <dd>
            {{demandeDetails.status}}
          </dd>
          <dt>
            Type d'attestation
          </dt>
          <dd>
            {{demandeDetails.typeAttestationEntreprise.nom}}
          </dd>
          <dt>
            Observation
          </dt>
          <dd>
            {{demandeDetails.observation}}
          </dd>
          <dt *ngIf="demandeDetails.motifRefus !== '' &&  demandeDetails.motifRefus !== null">
            Motif de refus
          </dt>
          <dd *ngIf="demandeDetails.motifRefus !== '' &&  demandeDetails.motifRefus !== null">
            {{demandeDetails.motifRefus}}
          </dd>
          <dd>&nbsp;</dd><dt>&nbsp;</dt>
          <dt *ngIf="demandeDetails.refuse">
            Motif de refu
          </dt>
          <dd *ngIf="demandeDetails.refuse">
            <div class="controls">
              <textarea class="form-control" placeholder="Motif de refus" [ngStyle]="{'border-color':(demandeDetails.isErr )? 'red' : '' }" cols="30" rows="3" style="resize: none" [(ngModel)]="motifRefus"></textarea>
              <br>
              <span class="help-inline" style=" color:red;" *ngIf="demandeDetails.isErr ">Veuillez montrer votre motif de refus</span>
            </div>
          </dd>
        </dl>
        <dl class="dl-horizontal" *ngIf="typeDemande === 'absence'">
          <dt>
            Collaborateur
          </dt>
          <dd>
            {{demandeDetails.collaborateur.nom + ' ' + demandeDetails.collaborateur.prenom }}
          </dd>
          <dt>
            Date de demande
          </dt>
          <dd>
            {{demandeDetails.dateDemande | date : 'dd-MM-yyyy'}}
          </dd>
          <dt>
            Status
          </dt>
          <dd>
            {{demandeDetails.status}}
          </dd>
          <dt>
            Date de début
          </dt>
          <dd>
            {{demandeDetails.dateDebut | date : 'dd-MM-yyyy'}}
          </dd>
          <dt>
            Date de fin
          </dt>
          <dd>
            {{demandeDetails.dateFin | date : 'dd-MM-yyyy'}}
          </dd>
          <dt>
            Exercice
          </dt>
          <dd>
            {{demandeDetails.exercice}}
          </dd>
          <dt>
            Jour Ouvrable
          </dt>
          <dd>
            {{demandeDetails.jourOuvrable}}
          </dd>
          <dt>
            Repos
          </dt>
          <dd>
            {{demandeDetails.repos}}
          </dd>
          <dt>
            Ferier
          </dt>
          <dd>
            {{demandeDetails.feries}}
          </dd>
          <dt>
            Observation
          </dt>
          <dd>
            {{demandeDetails.observation}}
          </dd>
          <dt *ngIf="demandeDetails.motifRefus !== '' &&  demandeDetails.motifRefus !== null">
            Motif de refus
          </dt>
          <dd *ngIf="demandeDetails.motifRefus !== '' &&  demandeDetails.motifRefus !== null">
            {{demandeDetails.motifRefus}}
          </dd>
          <dd>&nbsp;</dd><dt>&nbsp;</dt>
          <dt *ngIf="demandeDetails.refuse">
            Motif de refu
          </dt>
          <dd *ngIf="demandeDetails.refuse">
            <div class="controls">
            <textarea class="form-control" placeholder="Motif de refus" [ngStyle]="{'border-color':(demandeDetails.isErr )? 'red' : '' }" cols="30" rows="3" style="resize: none" [(ngModel)]="motifRefus"></textarea>
              <br>
              <span class="help-inline" style=" color:red;" *ngIf="demandeDetails.isErr ">Veuillez montrer votre motif de refus</span>
            </div>
          </dd>

        </dl>
      </div>
      <div class="modal-footer" *ngIf="demandeDetails !== null && (demandeDetails.motifRefus === '' || demandeDetails.motifRefus === null)">
        <button class="btn btn-success" *ngIf="!demandeDetails.refuse "style="margin: 5px;">Accepter</button>
        <button class="btn btn-success" *ngIf="demandeDetails.refuse  && demandeDetails.motifRefus === '' || demandeDetails.motifRefus === null" (click)="refuser()" style="margin: 5px;">Valider</button>
        <button class="btn btn-danger" style="margin: 5px;" *ngIf="!demandeDetails.refuse  " (click)="refuser()">Refuser</button>
        <button class="btn " style="margin: 5px;" data-dismiss="modal" >Annuler</button>
      </div>
      <div class="modal-footer" *ngIf="demandeDetails !== null && (demandeDetails.motifRefus !== '' &&  demandeDetails.motifRefus !== null)">
        <button class="btn " style="margin: 5px;" data-dismiss="modal" >Fermer</button>
      </div>
      </div>
  </div>
</div>
<div class="wrapper" >
  <div class="container" >
    <div class="row">
      <app-sidebar></app-sidebar>
      <!--/.span3-->
      <div class="span9" >
        <div class="content">

          <div class="module">
            <div class="module-head">
              <div class="control-group">
                <label class="control-label">Gestion des Demandes</label>
                <div class="controls">
                  <label class="radio inline">
                    <input type="radio" name="optionsRadios" [(ngModel)]="typeDemande" value="absence" checked="">
                    Absence
                  </label>
                  <label class="radio inline">
                    <input type="radio" name="optionsRadios" [(ngModel)]="typeDemande"  value="attestation">
                    Attestation
                  </label>
                  <label class="radio inline">
                    <input type="radio" name="optionsRadios" value="sortie" [(ngModel)]="typeDemande">
                    Sortie
                  </label>
                  <label class="radio inline">
                    <input type="radio" name="optionsRadios" value="travail" [(ngModel)]="typeDemande">
                    Travail
                  </label>
                </div>
              </div>
              <div class="row">

                <div class="span2" style="display: flex;">
                  <button style="margin-right: 5px"  class="btn btn-success" routerLink="/add-demande">Ajouter </button>
                  <div class="dropdown" style="width: 30%;" *ngIf="typeDemande === 'absence'">
                    <button class="btn btn-default " data-toggle="dropdown">
                      <img src="../../assets/settings.png" style="height: 20px;" alt="">
                    </button>
                    <ul class="dropdown-menu" style="overflow-y: scroll; height: 180px ;">
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonAbs.id" (change)="choseColonAbsence()">Id</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonAbs.collaborateur" (change)="choseColonAbsence()">Collaborateur</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonAbs.dateDemande" (change)="choseColonAbsence()">Date de demande</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonAbs.dateDebut" (change)="choseColonAbsence()">Date de débute</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonAbs.dateFin" (change)="choseColonAbsence()">Date de fin</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonAbs.observation" (change)="choseColonAbsence()">Observation</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonAbs.status" (change)="choseColonAbsence()">Status</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonAbs.exercice" (change)="choseColonAbsence()">Exercice</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonAbs.jourOuvrable" (change)="choseColonAbsence()">Jour ouvrable</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonAbs.repos" (change)="choseColonAbsence()">Repos</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonAbs.feries" (change)="choseColonAbsence()">Férier</label>
                        </div>
                      </li>

                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonAbs.motifRefus" (change)="choseColonAbsence()">Motif de refus</label>
                        </div>
                      </li>

                    </ul>
                  </div>
                  <div class="dropdown" style="width: 30%;" *ngIf="typeDemande === 'sortie'">
                    <button class="btn btn-default " data-toggle="dropdown">
                      <img src="../../assets/settings.png" style="height: 20px;" alt="">
                    </button>
                    <ul class="dropdown-menu" style="overflow-y: scroll; height: 180px ;">
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonSortie.id" (change)="choseColonSortie()">Id</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonSortie.collaborateur" (change)="choseColonSortie()">Collaborateur</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonSortie.dateDemande" (change)="choseColonSortie()">Date de demande</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonSortie.dateSortie" (change)="choseColonSortie()">Date de sortie</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonSortie.heureSortie" (change)="choseColonSortie()">Heure de sortie</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonSortie.heureReteur" (change)="choseColonSortie()">Heure de Reteur</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonSortie.observation" (change)="choseColonSortie()">Observation</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonSortie.status" (change)="choseColonSortie()">Status</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonSortie.motifRefus" (change)="choseColonSortie()">Motif de refus</label>
                        </div>
                      </li>
                      <li style="padding: 5px;">
                        <div class="checkbox">
                          <label><input type="checkbox" [(ngModel)]="colonSortie.motifSortie" (change)="choseColonSortie()">Motif de sortie</label>
                        </div>
                      </li>

                    </ul>
                  </div>
                </div>
              </div>
            </div>
            <div class="module-body" *ngIf="typeDemande === 'absence'">
              <h5>Demandes des absences</h5>
              <table class="table">
                <thead>
                <tr>
                  <th *ngIf="colonAbs.id">#</th>
                  <th *ngIf="colonAbs.collaborateur">Collaborateur</th>
                  <th *ngIf="colonAbs.dateDemande">Date de demande</th>
                  <th *ngIf="colonAbs.observation">Observation</th>
                  <th *ngIf="colonAbs.status">Status</th>
                  <th *ngIf="colonAbs.dateDebut">Date de début</th>
                  <th *ngIf="colonAbs.dateFin">Date de fin</th>
                  <th *ngIf="colonAbs.exercice">Exercice</th>
                  <th *ngIf="colonAbs.jourOuvrable">Jour ouvrable</th>
                  <th *ngIf="colonAbs.repos">Repos</th>
                  <th *ngIf="colonAbs.feries">Férier</th>
                  <th *ngIf="colonAbs.motifRefus">Motif de refus</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let d of demandeAbsence" data-toggle="modal" data-target="#myModal" (click)="demandeDetailInit(d)" style="cursor: pointer">
                  <td *ngIf="colonAbs.id">{{d.id}}</td>
                  <td *ngIf="colonAbs.collaborateur">{{d.collaborateur.nom + ' ' + d.collaborateur.prenom }}</td>
                  <td *ngIf="colonAbs.dateDemande">{{d.dateDemande | date : 'dd-MM-yyyy'}}</td>
                  <td *ngIf="colonAbs.observation">{{d.observation}}</td>
                  <td *ngIf="colonAbs.status">{{d.status}}</td>
                  <td *ngIf="colonAbs.dateDebut">{{d.dateDebut | date : 'dd-MM-yyyy'}}</td>
                  <td *ngIf="colonAbs.dateFin">{{d.dateFin | date : 'dd-MM-yyyy'}}</td>
                  <td *ngIf="colonAbs.exercice">{{d.exercice}}</td>
                  <td *ngIf="colonAbs.jourOuvrable">{{d.jourOuvrable}}</td>
                  <td *ngIf="colonAbs.repos">{{d.repos}}</td>
                  <td *ngIf="colonAbs.feries">{{d.feries}}</td>
                  <td *ngIf="colonAbs.motifRefus">{{d.motifRefus}}</td>
                </tr>
                </tbody>
              </table>
            </div>
            <div class="module-body" *ngIf="typeDemande === 'attestation'">
              <h5>Demandes des attestation</h5>
              <table class="table">
                <thead>
                <tr>
                  <th>#</th>
                  <th>Collaborateur</th>
                  <th>Date de demande</th>
                  <th>Observation</th>
                  <th>Status</th>
                  <th>Type d'attestation</th>
                  <th>Motif de refus</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let d of demandeAttestation" data-toggle="modal" data-target="#myModal" (click)="demandeDetailInit(d)" style="cursor: pointer">
                  <td>{{d.id}}</td>
                  <td>{{d.collaborateur.id}}</td>
                  <td>{{d.dateDemande | date : 'dd-MM-yyyy'}}</td>
                  <td>{{d.observation}}</td>
                  <td>{{d.status}}</td>
                  <td>{{d.typeAttestationEntreprise.nom}}</td>
                  <td>{{d.motifRefus}}</td>
                </tr>
                </tbody>
              </table>
            </div>
            <div class="module-body" *ngIf="typeDemande === 'sortie'">
              <h5>Demandes des sorties</h5>
              <table class="table">
                <thead>
                <tr>
                  <th *ngIf="colonSortie.id">#</th>
                  <th *ngIf="colonSortie.collaborateur">Collaborateur</th>
                  <th *ngIf="colonSortie.dateDemande">Date de demande</th>
                  <th *ngIf="colonSortie.observation">Observation</th>
                  <th *ngIf="colonSortie.status">Status</th>
                  <th *ngIf="colonSortie.dateSortie">Date de sortie</th>
                  <th *ngIf="colonSortie.heureSortie">Heure de sortie</th>
                  <th *ngIf="colonSortie.heureReteur">Heure de reteur</th>
                  <th *ngIf="colonSortie.motifSortie">Motif de sortie</th>
                  <th *ngIf="colonSortie.motifRefus">Motif de refus</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let d of demandeSortie"  data-toggle="modal" data-target="#myModal" (click)="demandeDetailInit(d)" style="cursor: pointer">
                  <td *ngIf="colonSortie.id">{{d.id}}</td>
                  <td *ngIf="colonSortie.collaborateur">{{d.collaborateur.id}}</td>
                  <td *ngIf="colonSortie.dateDemande">{{d.dateDemande | date : 'dd-MM-yyyy'}}</td>
                  <td *ngIf="colonSortie.observation">{{d.observation}}</td>
                  <td *ngIf="colonSortie.status">{{d.status}}</td>
                  <td *ngIf="colonSortie.dateSortie">{{d.dateSortie | date : 'dd-MM-yyyy' }}</td>
                  <td *ngIf="colonSortie.heureSortie">{{d.heureSortie }}</td>
                  <td *ngIf="colonSortie.heureReteur">{{d.heureReteur }}</td>
                  <td *ngIf="colonSortie.motifSortie">{{d.motifSortie.nom}}</td>
                  <td *ngIf="colonSortie.motifRefus">{{d.motifRefus}}</td>
                </tr>
                </tbody>
              </table>
            </div>
            <div class="module-body" *ngIf="typeDemande === 'travail'">
              <h5>Demandes de travail</h5>
              <table class="table">
                <thead>
                <tr>
                  <th>#</th>
                  <th>Collaborateur</th>
                  <th>Date de demande</th>
                  <th>Observation</th>
                  <th>Status</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let d of demandeTravail">
                  <td>{{d.id}}</td>
                  <td>{{d.collaborateur.id}}</td>
                  <td>{{d.dateDemande | date : 'dd-MM-yyyy'}}</td>
                  <td>{{d.observation}}</td>
                  <td>{{d.status}}</td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
